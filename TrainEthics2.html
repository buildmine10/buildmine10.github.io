<!DOCTYPE html>

<html>
    <style>
        *{
            font-family: Arial;
            overflow: hidden;
        }



        body{
            background-color: pink;
            margin:0px;
        }

        #topBar{
            top: 0px;
            background-color: #0021A5;
            width: 100%;
            position: fixed;
            height: 3.5em;
            box-sizing: border-box;

            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 0.5em;
            padding-left: 1em;

            overflow: hidden;
        }

        #topBar>a{
            background-color: #0021A5;

            border: none;
            border-radius: 0.5em;
            padding: 0.5em;

            color:unset;
            text-decoration: none;

            display: flex;
            align-items: center;
            justify-content: center;

            font-size: 1em;


            color:white;
        }
        #topBar>a:hover{
            background-color: #D1ECF1;
            color: #0021A5;
        }



        #main{
            background-color: #F4F6F6;
            position: fixed;

            top: 3.5em;
            height: calc(100% - 3.5em);
            width: 100%;
            overflow: auto !important;
        }


        #temp1{
            background-color: red;
            height: 200%;
        }
        #temp2{
            background-color: cyan;
            height: 200%;
        }

        .Sticky{
            position: sticky;

            top: 0px;
            height: calc(100vh - 3.5em);
            overflow: hidden;
        }


        .StickySubsection{           
            position: absolute;
            top: 0px;
            left: 0px;
            
            width: 100%;
            height: 100%;

            overflow: hidden;
        }

        
        .StickySubsection.Closed{
            display: none;
        }
        
        


    </style>


    <style>
        

        .BarChartContainer{
            justify-content: space-around;
            height: 100%;
            overflow: hidden;
            align-items: stretch !important;
        }

        /*Around the bar and label*/
        .BarChartBarContainer{
            display: flex;
            flex-direction: column-reverse;
            gap: 1em;
            flex-grow: 1;
            /*height: 100%;*/
        }

        .BarChartLabel{
            display: flex;
            justify-content: center;
        }

        /*Immeadiately around the bar*/
        .BarChartBarBarContainer{
            flex-grow: 1;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
        }

        .BarChartBar{
            background-color: #FA4616;
            width: 50%;
            transition-duration: 0.5s;
            margin-top: 1em;
        }

        .BarChartBar.Opened{

        }

        .BarChartBar.Closed{
            height: 0px !important;
        }
    </style>

    <style>
            

        .PieChartContainer{
            overflow: hidden;
            display: inline-block;
            height: 100%;
            aspect-ratio: 1;
        }

        .PieChartSlice{
            /*Make it a circle*/
            display: block;
            justify-content: center;

            position: relative;
            left: 0px;


            width: 100%;
            height: 0px;
            padding-top: 50%;
            padding-bottom: 50%;
            border-radius: 50%;
            /*The pie shape comes from the javascript provided animation*/

            transition: 0.5s;

            overflow: hidden;
        }

        .PieChartSlice.Closed{
            opacity: 0;
        }


        .PieChartSliceLabelContainer{
            translate: 50% 0px;
            transform-origin: top left;
            overflow:visible;
        }

        .PieChartSliceLabelContainer.Closed{
            opacity: 0;
        }

        .PieChartSliceLabel{
            /*transform-origin: bottom left;*/
            text-align: center;
            translate: 80% -50%;
            width: 25%;
            
            
        }

        .PieChartSliceLabel.Closed{
            opacity: 0;
        }

        
        
    </style>

    <style>
        .Text{
            transition: opacity 0.5s;
            overflow: visible;
        }

        .Text.Opened{
            opacity: 1;
            
        }

        .Text.Closed{
            opacity: 0;
        }


        .Header{
            font-size: 3vw;
            padding-left: 0.5em;
            padding-top: 0.5em;
            padding-bottom: 0.5em;
            box-sizing: border-box;
            height:fit-content;
            overflow: visible;
        }

        .Slide{
            box-sizing: border-box;
            padding: 1em;
            display:flex;
            flex-direction: column;
            gap: 1em;
            
            align-items: stretch;
            overflow: hidden;
            height: 100%;
        }

        /*
        .Slide.Closed{
            display: none;
        }
        */

        .HorizontalContent{
            box-sizing: border-box;
            display:flex;
            flex-direction: row;
            gap: 0.5em;
            align-items: center;
            flex-grow: 1;
            max-height: 100%;
            max-width: 100%;
        }

        .VerticalContent{
            box-sizing: border-box;
            display:flex;
            flex-direction: column;
            gap: 0.5em;
            align-items: center;
            flex-grow: 1;
            max-height: 100%;
            max-width: 100%;
        }

        .TextContainer{
            height: 100%;
            justify-content: space-evenly;
            font-size: min(2vw, 3vh);
            max-width: 50vw;
            margin: 1em;
            align-items: flex-start;
            overflow: visible;
        }

    </style>

    <body>
        <div id="topBar"></div>
        <div id="main">
            <!-- This is where sticky sections go -->
        </div>
    </body>

    <!-- Storage of the Sticky Sections and Scroll Behavior -->
    <script>
        var stickySections = []

                

        //Setup the on scroll call backs
        var scrollPercent = 0;
        var onScroll = [];
        document.getElementById('main').addEventListener('scroll', function() {
            var scrollTop = this.scrollTop;
            var scrollHeight = this.scrollHeight;
            var elementHeight = this.clientHeight;
            scrollPercent = (scrollTop / (scrollHeight - elementHeight));

            //console.log((scrollPercent * 100).toFixed(2) + '%');
            onScroll.forEach(func=>{
                func();
            });
        });

        //The percent scroll bounds of each sticky section
        var sectionPercents = [];

        function calibrateSectionPercents(){
            sectionPercents = [];

            for(let section of stickySections){
                let height = section.subSections.length;

                if (sectionPercents.length == 0) {
                    
                    sectionPercents.push({start: 0, end: height});
                    //console.log(this.sectionPercents[0])
                }else{
                    sectionPercents.push({start: sectionPercents[sectionPercents.length - 1].end, end: sectionPercents[sectionPercents.length - 1].end + height});
                }
            }

            let total = Math.max(1, sectionPercents[sectionPercents.length - 1].end - 1);


            sectionPercents.forEach((section, index)=>{
                const start = section.start;
                const end = section.end;
                sectionPercents[index].start = (start) / (total);
                sectionPercents[index].end = (end - 1) / (total);
            })

            //console.log(sectionPercents[0])
        }

        //Gets how far you have scrolled through a specific sticky section
        function getScrollPercent(stickyName){
            
            for(let index in stickySections){
                let section = stickySections[index];

                if(section.name == stickyName){
                    let bounds = sectionPercents[index];
                    //console.log(bounds)
                    if(bounds.start == bounds.end){
                        return 0;
                    }

                    return Math.max(Math.min((scrollPercent - bounds.start) / (bounds.end - bounds.start), 1), 0);
                }
            }
        }
    
    </script>

    <!-- Class definitions of the Sticky Sections -->
    <script>
        

        class Subsection{
            constructor(parent){
                if(parent == undefined){
                    console.log("Waring making a subsection that isn't inside a sticky section");
                }

                this.parent = parent;
                this.div = document.createElement("div");
                this.div.classList.add("StickySubsection");
                this.div.classList.add("Closed");


                //console.log(this.div)




                //A list of all elements and all the children of those elements
                this.elements = [];

                this.transitioningElements = new Set();


                this.isClosing = false;
                this.isOpening = false;
                this.transitionStartTime = null;
            }


            close(){
                this.isOpening = false;
                this.isClosing = true;
                //When this completes it needs to runs some function to open the next
                //console.log("CLOSE", this.elements.length);
                this.transitionStartTime = Date.now();

                
                this.elements.forEach(element=>{
                    element.classList.replace("Opened", "Closed");
                });

                //If nothing triggered a transition by 100 milliseconds, then end the transition
                setTimeout(()=>{
                    if(this.transitioningElements.size == 0){
                        this.onTransitionEnd();
                    }
                }, 100)
            }

            open(){
                this.isClosing = false;
                this.isOpening = true;

                //console.log("OPEN", this.elements.length)
                this.div.classList.replace("Closed", "Opened");//Show the div
                this.transitionStartTime = Date.now();

                //Then change the class on the children
                //The small delay is required to cause a screen refresh
                //Without it, the transitions would be skipped
                setTimeout(()=>{
                    this.elements.forEach(element=>{
                        element.classList.replace("Closed", "Opened");
                    });

                    //If nothing triggered a transition by 100 milliseconds, then end the transition
                    setTimeout(()=>{
                        if(this.transitioningElements.size == 0){
                            this.onTransitionEnd();
                        }
                    }, 100)
                }, 1)
            }


            addElement(element){
                element.classList.add("Closed");
                let i = this.elements.length;

                element.addEventListener('transitionstart', (event) => {
                    this.transitioningElements.add(i)
                    //console.log('Transition started on child for property:', event.propertyName, i);
                });
                element.addEventListener('transitionend', (event) => {
                    this.transitioningElements.delete(i)
                    //console.log('Transition ended on child for property:', event.propertyName, i);

                    if(this.transitioningElements.size == 0){
                        this.onTransitionEnd();
                    }
                });

                this.elements.push(element);
                //this.div.appendChild(element);
            }


            onTransitionEnd(){
                //If no transition is occuring do nothing
                //This assumes that transitions are at least 50 milliseonds
                //Prevents issues when an open and close transision start and end right next to each other.
                //Sometimes the close start before the open ends.
                //Sometime the open ends then the close starts.
                //It's a race condition. This ignores this function when it can't be correct.
                if(Date.now() - this.transitionStartTime < 50){
                    return;
                }

                if(this.isOpening){
                    //console.log("Finished Opening", this.elements.length)
                    this.isOpening = false;
                }

                if(this.isClosing){
                    //console.log("Finished Closing", this.elements.length)
                    this.isClosing = false;
                    this.div.classList.replace("Opened", "Closed");//Hide the div

                    this.parent.isClosing = false;
                    this.parent.shownSubsection = this.parent.nextSubsection;
                    this.parent.subSections[this.parent.nextSubsection].open();
                }
            }
        }

        class StickySection{
            constructor(name){
                this.name = name;

                //sectionDiv is the outer container
                this.sectionDiv = document.createElement("div");
                this.sectionDiv.style.height = "0%";
                this.sectionDiv.style.overflow = "unset";
                //this.sectionDiv.style.height = (subSections * 100) + "%";

                name = name.replace(/\s/, "");
                name = name.charAt(0).toLowerCase() + name.slice(1);

                this.sectionDiv.id = name.replace(" ", "");

                //stickyDiv is the inner container
                //This is where the slides are put
                this.stickyDiv = document.createElement("div");
                this.stickyDiv.classList.add("Sticky");

                this.sectionDiv.appendChild(this.stickyDiv);
                document.getElementById("main").appendChild(this.sectionDiv);

                stickySections.push(this);




                //Also need to add a button in the top bar
                this.button = document.createElement("a");
                this.button.href = "#" + this.sectionDiv.id;

                this.button.innerText = this.name;

                //Make it scroll smoothly
                this.button.addEventListener("click", function(e){
                    // Prevent the default anchor behavior
                    e.preventDefault();

                    // The target of the link
                    var targetId = this.getAttribute('href');
                    var targetElement = document.querySelector(targetId);

                    // Scroll to the target element smoothly
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                });


                document.getElementById("topBar").appendChild(this.button);



                //And finally the subsections
                //The things you actually see

                this.subSections = [];

                onScroll.push(()=>{
                    
                    //Select the subsection to show
                    let subsectionToShow = Math.min(Math.floor(getScrollPercent(this.name) * this.subSections.length), this.subSections.length - 1);
                    //console.log(getScrollPercent(this.name));
                    this.showSubsection(subsectionToShow);
                });

                this.shownSubsection = -1;
                this.nextSubsection = -1;
                this.isClosing = false;
            }

            addSubsection(){
                let subsection = new Subsection(this);

                this.subSections.push(subsection);

                this.stickyDiv.appendChild(subsection.div);

                //Update the height to match the 
                this.sectionDiv.style.height = (this.subSections.length * 200) + "%";
            }

            getSubsection(id){
                return this.subSections[id];
            }


            showSubsection(index){
                
                this.nextSubsection = index;
                //console.log(this.nextSubsection)

                if(this.isClosing && this.nextSubsection == this.shownSubsection){
                    this.subSections[index].open();
                    this.isClosing = false;
                }

                if(!this.isClosing && this.nextSubsection != this.shownSubsection){
                    

                    let currentSubsection = this.subSections[this.shownSubsection];

                    if(currentSubsection != undefined){
                        //This close function needs to call the show function of the subsection that is next to be shown.
                        currentSubsection.close()
                        this.isClosing = true;
                    }else{
                        //This was the first time any subsection was shown
                        this.shownSubsection = index;
                        this.nextSubsection = index;
                        this.subSections[index].open();
                    }
                }

                
                
                
            }

        }


        window.addEventListener("load", function(){
            calibrateSectionPercents();
            stickySections.forEach(section=>{
                section.showSubsection(0);
            })
        })

        
    
    </script>

    <!-- Bar Chart -->
    <script>
        class BarChart{
            constructor(){
                this.data = [];

                this.div = document.createElement("div");
                this.div.classList.add("HorizontalContent");
                this.div.classList.add("BarChartContainer");

                this.bars = [];

                this.animationTime = 0.6;//in seconds
            }

            addData(label, value, prefix, postfix){
                if (typeof value === 'string' || value instanceof String){
                    this.data.push({label: label, value: parseFloat(value.replace(",","")), valueLabel: value});
                }else{
                    this.data.push({label: label, value: value, valueLabel: value});
                }

                
                let barContainer = document.createElement("div");
                barContainer.classList.add("BarChartBarContainer");


                let labelDiv = document.createElement("div");
                labelDiv.classList.add("BarChartLabel");
                labelDiv.innerText = label;

                let barBarContainer = document.createElement("div");
                barBarContainer.classList.add("BarChartBarBarContainer");


                let bar = document.createElement("div");
                bar.classList.add("BarChartBar");

                let barData = document.createElement("div");
                barData.classList.add("BarChartLabel");
                barData.innerText = prefix + value + postfix;

                this.bars.push(barContainer);


                barBarContainer.appendChild(bar);
                barBarContainer.appendChild(barData);

                barContainer.appendChild(labelDiv);
                barContainer.appendChild(barBarContainer);

                this.div.appendChild(barContainer);

            }

            updateHeights(){
                let max = this.data.reduce((a,value)=>{
                    return Math.max(a, value.value);
                }, -Infinity);

                //console.log(max)
                this.bars.forEach((bar, index)=>{
                    bar.getElementsByClassName("BarChartBar")[0].style.height = (this.data[index].value / max) * 100 + "%";

                    let delay = (1 - this.data[index].value / max) / 2;
                    bar.getElementsByClassName("BarChartBar")[0].style.transitionDelay = `${delay}s`;
                    bar.getElementsByClassName("BarChartBar")[0].style.transitionDuration = `${this.animationTime - delay}s`;
                    //console.log(bar.getElementsByClassName("BarChartBar")[0].style.height)
                })
            }


            getAnimatedElements(){
                return this.bars.map((bar)=>{
                    return bar.getElementsByClassName("BarChartBar")[0];
                })
            }
        }
    
        
    </script>

    <!-- Pie Chart -->
    <script>

    function sampleEaseCurve(x){
        function curve(p){
            let ip = 1- p;
            let p1 = [0.42, 0]
            let p2 = [1,1]
            let x = ip*ip*ip * 0 + 3 * ip * ip * p * p1[0] + 3 * ip * p * p * p2[0] + p*p*p*1;
            let y = ip*ip*ip * 0 + 3 * ip * ip * p * p1[1] + 3 * ip * p * p * p2[1] + p*p*p*1;
            return [x, y]
        }

        let lower = 0;
        let upper = 1;

        for(let i = 0; i < 30; i++){
            let middle = (lower + upper) * 0.5;
            if(curve(middle)[0] > x){
                upper = middle;
            }else{
                lower = middle;
            }
        }
        
        return curve((lower + upper) / 2)[1]
    }

    //Rotates the text to follow the slices
    function createAnimation(startAngle1, endAngle1, startAngle2, endAngle2){
        const styleSheet = document.createElement('style');
        document.head.appendChild(styleSheet);

        if(this.animationCount == undefined){
            this.animationCount = 0;
        }

        let animationName = `ANIMATION${this.animationCount}`;
        this.animationCount++;

        let keyframes = `@keyframes ${animationName}{`;
        const frames = 10;
        for(let i = 0; i <= frames; i++){
            let percent = i / frames;

            let angle = percent * (endAngle1 - startAngle1) + startAngle1;

            let points = [];


            if(i == frames){
                keyframes += `${100}% {`;
            }else if(i == 0){
                keyframes += `${0}% {`;
            }else{
                keyframes += `${sampleEaseCurve(percent) * 100}% {`;
            }
            
            //keyframes += `transform: rotate(${(endAngle2 - startAngle2) * percent + startAngle2}rad);`;
            keyframes += `transform: rotate(-${angle / 2}rad);`;
            
            keyframes += "}\n";
        }

        keyframes += "}"


        styleSheet.appendChild(document.createTextNode(keyframes));

        return animationName;
    }

    //Rotates the text so it stays level
    function createAnimation3(startAngle1, endAngle1, startAngle2, endAngle2){
        const styleSheet = document.createElement('style');
        document.head.appendChild(styleSheet);

        if(this.animationCount == undefined){
            this.animationCount = 0;
        }

        let animationName = `ANIMATION${this.animationCount}`;
        this.animationCount++;

        let keyframes = `@keyframes ${animationName}{`;
        const frames = 10;
        for(let i = 0; i <= frames; i++){
            let percent = i / frames;

            let angle = percent * (endAngle1 - startAngle1) + startAngle1;

            let points = [];


            if(i == frames){
                keyframes += `${100}% {`;
            }else if(i == 0){
                keyframes += `${0}% {`;
            }else{
                keyframes += `${sampleEaseCurve(percent) * 100}% {`;
            }
            
            keyframes += `transform: rotate(${(endAngle2 - startAngle2) * percent + startAngle2 + angle / 2}rad);`;
            //keyframes += `transform: rotate(${angle2}rad);`;
            
            keyframes += "}\n";
        }

        keyframes += "}"


        styleSheet.appendChild(document.createTextNode(keyframes));

        return animationName;
    }

    //Grows the slices
    function createAnimation2(startAngle1, endAngle1, startAngle2, endAngle2){
        const styleSheet = document.createElement('style');
        document.head.appendChild(styleSheet);

        if(this.animationCount == undefined){
            this.animationCount = 0;
        }

        let animationName = `ANIMATION${this.animationCount}`;
        this.animationCount++;

        let keyframes = `@keyframes ${animationName}{`;
        const frames = 10;
        const pointCount = 10;
        for(let i = 0; i <= frames; i++){
            let percent = i / frames;

            let angle = percent * (endAngle1 - startAngle1) + startAngle1;

            let points = [];

            for(let j = 0; j <= pointCount; j++){
                let p = j / pointCount; 

                let x = 0.5 + Math.cos(angle * p) * 0.5 * 1.1;
                let y = 0.5 - Math.sin(angle * p) * 0.5 * 1.1;

                points.push([x, y])
            }

            if(i == frames){
                keyframes += `${100}% {`;
            }else if(i == 0){
                keyframes += `${0}% {`;
            }else{
                keyframes += `${sampleEaseCurve(percent) * 100}% {`;
            }
            keyframes += `clip-path: polygon(50% 50%,`;// 100% 50%, 100% 100%, 50% 100%);}`;

            points.forEach(point=>{
                keyframes += `${point[0] * 100}% ${point[1] * 100}%,`
            })
            keyframes = keyframes.slice(0, keyframes.length-1);
            keyframes += ")";
            
            keyframes += `;\n transform: rotate(-${(endAngle2 - startAngle2) * percent + startAngle2}rad);`;
            
            keyframes += "}\n";
        }

        keyframes += "}"


        styleSheet.appendChild(document.createTextNode(keyframes));

        return animationName;
    }

    class PieChart{
        constructor(){
            this.data = [];

            this.div = document.createElement("div");
            //this.div.classList.add("HorizontalContent");
            this.div.classList.add("PieChartContainer");


            this.values = [];

            this.slices = [];
            this.text = [];

            this.animationTime = 0.5;//in seconds
        }

        addData(label, value, prefix, postfix, color, textColor){
            if (typeof value === 'string' || value instanceof String){
                this.data.push({label: label, value: parseFloat(value.replace(",","")), valueLabel: prefix + value + postfix});
            }else{
                this.data.push({label: label, value: value, valueLabel: prefix + value + postfix});
            }


            let temp = this.data[this.data.length - 1];
            
            this.values.push(temp.value);

            let circle = document.createElement("div");

            let labelContainer = document.createElement("div");
            labelContainer.classList.add("PieChartSliceLabelContainer")


            let text = document.createElement("div");

            text.style.color = textColor;
            text.innerText = label;
            text.style.position = "relative";
            //text.style.translate = "75% -1em";
            text.classList.add("PieChartSliceLabel");


            labelContainer.appendChild(text);
            circle.appendChild(labelContainer);

            circle.style.backgroundColor = color;
            circle.style.translate = `0px -${100 * (this.data.length - 1)}%`;

            //console.log(circle.style)
            circle.classList = "PieChartSlice";

            

            this.div.appendChild(circle);

            this.slices.push(circle);
            this.text.push(labelContainer);
            
            //console.log("HJ")
        }

        updatePercents(){
            //This actually generates new animations and assigns them
            let total = this.values.reduce((sum, cur)=>{
                return sum + cur;
            }, 0);

            let percents = this.values.map(value=>{
                return value / total;
            })

            let previousAngle = 0;

            this.slices.forEach((element, index)=>{
                let anim = createAnimation2(0, percents[index] * Math.PI * 2, 0, previousAngle);
                let anim2 = createAnimation(0, percents[index] * Math.PI * 2, 0, previousAngle);
                let anim3 = createAnimation3(0, percents[index] * Math.PI * 2, 0, previousAngle);
                console.log(previousAngle)
                previousAngle += percents[index] * Math.PI * 2;

                this.text[index].style.animation = `${anim2} ${this.animationTime}s linear both`;

                this.text[index].childNodes[0].style.animation = `${anim3} ${this.animationTime}s linear both`;
                
                this.text[index].childNodes[0].innerText = `${this.data[index].label}\n${this.data[index].valueLabel}`;

                element.style.animation = `${anim} ${this.animationTime}s linear both`;
            });
        }


        getAnimatedElements(){
            return this.slices;
        }
    }

    
</script>

    <!-- Problem Section -->
    <script>
        let carSection = new StickySection("Problem");

        carSection.addSubsection();

        //First slide
        {
            let div = document.createElement("div");
            carSection.getSubsection(0).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            carSection.getSubsection(0).addElement(header);
            header.classList.add("Header");
            header.innerText = "Car dependency in Florida comes at a massive societal cost";


            let body = document.createElement("div");
            carSection.getSubsection(0).addElement(body);
            body.classList.add("HorizontalContent");

            let textSection = document.createElement("div");
            carSection.getSubsection(0).addElement(textSection);
            textSection.classList.add("VerticalContent");
            textSection.classList.add("TextContainer");

            //Messages in the text section 
            {
                let message1 = document.createElement("div");
                carSection.getSubsection(0).addElement(message1);
                message1.classList.add("Text");
                message1.innerText = "Florida has spent around $5 billion per year on road infrastructure, for the past 5 years."

                let message2 = document.createElement("div");
                carSection.getSubsection(0).addElement(message2);
                message2.classList.add("Text");
                message2.innerText = "And this spending is only going to increase over the years, as Florida remains stuck in the car dependency cycle."

                let message3 = document.createElement("div");
                carSection.getSubsection(0).addElement(message3);
                message3.classList.add("Text");
                message3.innerText = "As more people use cars, the roads get more congested. And when the road gets congested the state builds more roads. But that just encourages more people to drive. And we end up back at the original problem."
            
                textSection.appendChild(message1);
                textSection.appendChild(message2);
                textSection.appendChild(message3);
            }
            
            let chartSection = document.createElement("div");
            carSection.getSubsection(0).addElement(chartSection);
            chartSection.classList.add("VerticalContent");

            let chart = new BarChart();
            chart.addData("2019", 3.6, "$", "B");
            chart.addData("2020", 3.3, "$", "B");
            chart.addData("2021", 4.8, "$", "B");
            chart.addData("2022", 5.8, "$", "B");
            chart.addData("2023", 7.8, "$", "B");

            chart.updateHeights();

            chart.getAnimatedElements().forEach(element=>{
                carSection.getSubsection(0).addElement(element);
            })
            



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection);
            body.appendChild(chart.div);
            //body.appendChild(chartSection);


            carSection.getSubsection(0).div.appendChild(div);
        }

        carSection.addSubsection();
        {
            let div = document.createElement("div");
            carSection.getSubsection(1).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            carSection.getSubsection(1).addElement(header);
            header.classList.add("Header");
            header.innerText = "Car dependency in Florida comes at a massive societal cost";


            let body = document.createElement("div");
            carSection.getSubsection(1).addElement(body);
            body.classList.add("HorizontalContent");

            let textSection = document.createElement("div");
            carSection.getSubsection(1).addElement(textSection);
            textSection.classList.add("VerticalContent");
            textSection.classList.add("TextContainer");

            //Messages in the text section 
            {
                let message1 = document.createElement("div");
                carSection.getSubsection(1).addElement(message1);
                message1.classList.add("Text");
                message1.innerText = "In additional to governmental costs, cars demand a substantial price for their continued use due to continued refueling and maintenance costs."


                textSection.appendChild(message1);

            }
            
            let chartSection = document.createElement("div");
            carSection.getSubsection(1).addElement(chartSection);
            chartSection.classList.add("VerticalContent");

            let chart = new BarChart();
            chart.addData("2019", "9,282", "$", "");
            chart.addData("2020", "9,561", "$", "");
            chart.addData("2021", "9,666", "$", "");
            chart.addData("2022", "10,800", "$", "");
            chart.addData("2023", "12,150", "$", "");

            chart.updateHeights();

            chart.getAnimatedElements().forEach(element=>{
                carSection.getSubsection(1).addElement(element);
            })
            



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection);
            body.appendChild(chart.div);
            //body.appendChild(chartSection);


            carSection.getSubsection(1).div.appendChild(div);
        }

        carSection.addSubsection();
        {
            let sectionIndex = 2;

            let div = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Car dependency in Florida comes at a massive societal cost";


            let body = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");

            let textSection = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(textSection);
            textSection.classList.add("VerticalContent");
            textSection.classList.add("TextContainer");

            //Messages in the text section 
            {
                let message = document.createElement("div");
                carSection.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Car accidents account for 387,332 deaths and $340 billion in damages every year."


                textSection.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                carSection.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "The most common cause for accidents is driver error due to negligence."


                textSection.appendChild(message);
            }

            let image = document.createElement("img");
            carSection.getSubsection(sectionIndex).addElement(image);
            image.classList.add("Text");
            image.src = "https://www.ocala.com/gcdn/presto/2022/10/28/NOSB/69c190f0-b0fc-4dfe-bea6-dd5cb5283462-White_Hyundai.jpg?width=660&height=495&fit=crop&format=pjpg&auto=webp";
            textSection.appendChild(image);



            let chartSection = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");

            let chart = new BarChart();
            chart.addData("2019", "401,867", "", "\nCrashes");
            chart.addData("2020", "341,399", "", "\nCrashes");
            chart.addData("2021", "401,540", "", "\nCrashes");
            chart.addData("2022", "397,620", "", "\nCrashes");
            chart.addData("2023", "394,230", "", "\nCrashes");

            chart.updateHeights();

            chart.getAnimatedElements().forEach(element=>{
                carSection.getSubsection(sectionIndex).addElement(element);
            })
            



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection);
            body.appendChild(chart.div);
            //body.appendChild(chartSection);


            carSection.getSubsection(sectionIndex).div.appendChild(div);
        }

        carSection.addSubsection();
        {
            let sectionIndex = 3;

            let div = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Car dependency in Florida comes at a massive societal cost";


            let body = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");

            let textSection = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(textSection);
            textSection.classList.add("VerticalContent");
            textSection.classList.add("TextContainer");

            //Messages in the text section 
            {
                let message = document.createElement("div");
                carSection.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Pollution"


                textSection.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                carSection.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Pollution"


                textSection.appendChild(message);
            }

            let image = document.createElement("img");
            carSection.getSubsection(sectionIndex).addElement(image);
            image.classList.add("Text");
            image.src = "https://www.ocala.com/gcdn/presto/2022/10/28/NOSB/69c190f0-b0fc-4dfe-bea6-dd5cb5283462-White_Hyundai.jpg?width=660&height=495&fit=crop&format=pjpg&auto=webp";
            textSection.appendChild(image);



            let chartSection = document.createElement("div");
            carSection.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");

            let chart = new BarChart();
            chart.addData("2019", "401,867", "", "\nCrashes");
            chart.addData("2020", "341,399", "", "\nCrashes");
            chart.addData("2021", "401,540", "", "\nCrashes");
            chart.addData("2022", "397,620", "", "\nCrashes");
            chart.addData("2023", "394,230", "", "\nCrashes");

            chart.updateHeights();

            chart.getAnimatedElements().forEach(element=>{
                carSection.getSubsection(sectionIndex).addElement(element);
            })
            



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection);
            body.appendChild(chart.div);
            //body.appendChild(chartSection);


            carSection.getSubsection(sectionIndex).div.appendChild(div);
        }


        
    </script>

    <!-- Solution Section -->
    <script>
        let solutionSection = new StickySection("Solution");


        let section = solutionSection

        section.addSubsection();
        {
            let sectionIndex = 0;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Trains could be the solution";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");

            let textSide = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSide);
            textSide.classList.add("VerticalContent");
            textSide.classList.add("TextContainer");
            textSide.style.margin = "unset"

            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");

            let textSection2 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection2);
            textSection2.classList.add("VerticalContent");
            textSection2.classList.add("TextContainer");

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Currently there are four passenger rain services in Florida: Amtrak, Brightline, SunRail, Tri-Rail. Unfortunately due to underuse, the rail network has been shrunken significanty from its historical high."


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "These trains connect up the east coast of Flordia, providing travel times faster than you can achieve by driving on the highway."


                textSection1.appendChild(message);
            }


            //Section 2
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "However in Japan a thorough rail network has been established and well maintained. This network has nearly entirely replaced roads both for moving within cities and between them."


                textSection2.appendChild(message);
            }

            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "A famous rail network in Japan is the Shinkansen like of trains. These trains replace airplanes in the service they provide, that is cross country travel comparable to the length of the east coast of the US."


                textSection2.appendChild(message);
            }

            



            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
            
            {
                let image = document.createElement("img");
                section.getSubsection(sectionIndex).addElement(image);
                image.classList.add("Text");
                image.src = "https://upload.wikimedia.org/wikipedia/commons/7/7e/BrightLine_train_test.jpg";
                image.style.height = "50%";

                chartSection.appendChild(image);
            }

            {
                let image = document.createElement("img");
                section.getSubsection(sectionIndex).addElement(image);
                image.classList.add("Text");
                image.src = "https://upload.wikimedia.org/wikipedia/commons/8/88/Series-N700S-J2.jpg";
                image.style.height = "50%";

                
                chartSection.appendChild(image);
            }
            
            



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSide);
            textSide.appendChild(textSection1);
            textSide.appendChild(textSection2);
            body.appendChild(chartSection);


            section.getSubsection(sectionIndex).div.appendChild(div);
        }

        //Pollution
        section.addSubsection();
        {
            let sectionIndex = 1;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Trains could be the solution";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "By comparing Japan's train network to Florida's roads we can get an understanding of how a well developed train system in Florida might impact our world."


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "A surprising metric from Japan is that on 4.1% of their transportation pollution is from trains; whereas, 86% is from cars. This is mainly a surprise because train use is overwhelmingly more common in Japan than car use. Much like how car use trounces all other forms of transportation in the US, but reversed. This means that the minority of cars in Japan are producing the majority of the transportation pollution."


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "This should signal to you that Florida must create aburd amounts of transportation pollution than Japan even though Japan's population is larger, and the scale of the environmental impact we could make by shifting to trains."


                textSection1.appendChild(message);
            }



            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        

            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Pollution per person\nGrams of Co2 per person per km"


                chartSection.appendChild(message);
            }

            let chart = new PieChart();
            chart.addData("Trains in Japan", "25", "", "", "#0021A5", "white");
            chart.addData("Cars in Florida", "132", "", "", "#FA4616", "black");
            chart.updatePercents();

            chart.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart.div)

            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }

        //Cost of commute
        section.addSubsection();
        {
            let sectionIndex = 2;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Trains could be the solution";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Another consideration when moving to trains is the price."


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "In Florida the average gas cost of the daily commute between work and home comes out to about $5.89. This is taking into account the price of gas and the distance needed to be traveled."


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "If we compare this to the projected price of taking a train, we can see that the trains have significantly cheaper commute price of $2.72. This price was found using the prices of Tokyo's intracity transport system, and extrapolating it out to the commuting distances found in Florida. Unfortunately, the average commute distance is further than the Tokyo railline go because Florida is less densly populated; however, it isn't much further and the upper bound of the extrapolation was used."


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "Sadly, Florida doesn't have an analogous system of public transporation between cities to use as comparison. So if we use New York's subway because its also a dense metropolitan area, then we see that a train system in America capable of meeting your daily commuting needs would cost $2.90."


                textSection1.appendChild(message);
            }



            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        
            
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Price of daily work commute"


                chartSection.appendChild(message);
            }

            let chart2 = new PieChart();
            chart2.addData("Trains in Japan", "2.72", "$", "", "#0021A5", "white");
            chart2.addData("Cars in Florida", "5.89", "$", "", "#FA4616", "black");
            
            chart2.updatePercents();
            
            chart2.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart2.div)



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        
        //Speed
        section.addSubsection();
        {
            let sectionIndex = 3;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Trains could be the solution";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "In addition to daily commutes, trains would also be used for long distance trips. This is the first use case that would see improvement if society decided to transition towards trains. It is also the area where trains hold the title for cleanest and most energy efficient way to get places quickly."


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "These types of trains would connect major cities together. And we will once again look to Japan to see how they did their long distance rail network, specifically we will look at the Shinkansen."


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "The Shinkansen spans the length of Japan, which is the same as the height of the US east coast. The shinkansen can take you from Toyko to Osaka in 2 hours and 33 minutes. If the existing rail network in America supported the Shinkansen, these speeds would have you going from Orlando to Jacksonville in 1 hour."


                textSection1.appendChild(message);
            }




            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        
            
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Time needed to go from Orlando to Jacksonville"


                chartSection.appendChild(message);
            }

            let chart2 = new PieChart();
            chart2.addData("Projected High Speed Rail Time", "1", "", " Hour", "#0021A5", "white");
            chart2.addData("Time Needed to Drive in a Car", "2", "", " Hours", "#FA4616", "black");
            
            chart2.updatePercents();
            
            chart2.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart2.div)



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        

    </script>

    <!-- Ethics Section -->
    <script>
        let ethicsSection = new StickySection("Ethics");


        section = ethicsSection;

        //Intro
        section.addSubsection();
        {
            let sectionIndex = 0;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Ethics Breakdown";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "The ethical considerations that push us to push you towards trains can be userstood from 5 ethical frameworks: The Common Good, Utilitarianism, Rights, Virtue, and Fairness."


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Each of these frameworks analyze different aspects of the isse and priorizise different entities in their decision making, which produces quirks that don't always align with our expectations of proper behavior.";


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "This is why we utilize multiple frameworks, so that we can see these quirks and better understand what we beleive to be the ethical decision.";


                textSection1.appendChild(message);
            }



            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        
            
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Placeholder. What should be put here?"


                chartSection.appendChild(message);
            }

            let chart2 = new PieChart();
            chart2.addData("Trains in Japan", "2.72", "$", "", "#0021A5", "white");
            chart2.addData("Cars in Florida", "5.89", "$", "", "#FA4616", "black");
            
            chart2.updatePercents();
            
            chart2.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart2.div)



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        
        //Greater good
        section.addSubsection();
        {
            let sectionIndex = 1;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Common Good";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "The Common Good framework has us looking out for those most at risk from our actions. The idea being that if those most at risk are helped, then all get helped. When viewed this way, the reductions in air and noise pollution alongside cheaper transit both help the environment and the poor."


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");

                //message.innerText = "Reducing air pollution helps combat climate change, which in turn reduces the frequency and severity of disasters such as milder storms, smaller droughts, and slower coastal erosion.";
                message.innerText = "Air pollution is well known to be the cause of climate changes, so all reductions to air pollution are viewed as giving a positive benefit to the entire world. Slowing climate change, reduces the disasters experience in countries all around the world; milder storms, less frequent and smaller droughts, and a stopping of the ever encroaching shore.";

                


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "For the poor, cheaper transit allowed them to better hold a job. One of the major obstacles to job security among the poor is solving the problem of how to get to and from work. By using the previously stated statistic for the price of commuting, we can see that commuting costs 17% of their income, which is unaffordable when housing costs 70%";


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "Thus we are ethically compelled to use trains as they lessen both of those problems, by making less pollution and costing less to use.";

                textSection1.appendChild(message);
            }


            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        
            
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Costs of the poor. (Replace housing percent with measured percentage) (get better working hours of the poor, assumed 40)"


                chartSection.appendChild(message);
            }

            let chart2 = new PieChart();
            chart2.addData("Housing", "336", "$", "", "#0021A5", "white");
            chart2.addData("Driving", "82.46", "$", "", "#FA4616", "black");
            chart2.addData("Other", "61", "$", "", "#888888", "white");
            
            chart2.updatePercents();
            
            chart2.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart2.div)



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        
        //Utilitarianism
        section.addSubsection();
        {
            let sectionIndex = 2;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Utilitarianism";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");
            textSection1.style.maxWidth = "unset";


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "The Utilitarianism framework is unique in that it can be described with a mathematical formula. But as it turns out actually using this formula is impossible as it requires perfect knowledge of the furture and the ability to determine what is supposed to be optimized by a system of ethics. Should happiness be optimized or saddness minimized? Is it a combination of the two? And are there false ways to achieve this goal, such as with mind altering drugs?"


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Luckily, Utilitarianism can also be defined as maximizing future enjoyment. However, this does not always mean putting off enjoyment now for more enjoyment later. After all it's possible for a small amount enjoyment over a long period of time to outweight a large amount of enjoyment surounded by disatisfaction.";


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "The reason why Utilitarianism is associated with practicallity is because the same equation that used to defined Utilitarianism when applied to ethics can also be applied to engineering and economic problems by changing the target we optimize. For example, in economics Utilitarianism is called a Cost-Benefit analysis."


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "We decided to include a Utilitarian analysis because it can incorporate variables that are often overlooked by other frameworks. Utilitarianism is uniquely able to directly prioritize the health of the economy and free time by arbitrarily deciding that those are things we want to optimize. As such we have decided to just that.";


                textSection1.appendChild(message);
            }




            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }

        //Utilitarianism 2
        section.addSubsection();
        {
            let sectionIndex = 3;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Utilitarianism - Impact on the Economy";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");

            

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "As mentioned earlier widespread car use entails a massive economic cost. These costs are something we should seek to minimize. But more importantly than that, in this analysis we want to choose the option that most benefits the economy from the perspecitve of the normal person."


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "If we look to Japan for the cost of trains per person, we see that for the government spends significantly less per person on their train network. A large part of this is because the majority of the rail network is profitable.";


                textSection1.appendChild(message);
            }

            
            
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "If Florida developed such a train network, it would provide thousands of jobs, lower the price of transit for the individual, and reduce the tax burden. And all of those benefits would be by a significant amount.";


                textSection1.appendChild(message);
            }


            let textSection2 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection2);
            textSection2.classList.add("VerticalContent");
            textSection2.classList.add("TextContainer");


            //DUMMY SECTION TO CONTROL SPACING
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "";


                textSection2.appendChild(message);
            }


            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Cars\n\nYearly cost to the government: $350 per person"


                textSection2.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "Yearly cost to individuals: $12,150 per person";


                textSection2.appendChild(message);
            }

            //DUMMY SECTION TO CONTROL SPACING
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "";


                textSection2.appendChild(message);
            }

            //DUMMY SECTION TO CONTROL SPACING
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "";


                textSection2.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "Trains\n\nYearly cost to the government: $5.51 per person";


                textSection2.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "Yearly cost to individuals: $2,200 per person";


                textSection2.appendChild(message);
            }

            //DUMMY SECTION TO CONTROL SPACING
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "";


                textSection2.appendChild(message);
            }
            
            //DUMMY SECTION TO CONTROL SPACING
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "";


                textSection2.appendChild(message);
            }



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.append(textSection2)



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        
        //Rights
        section.addSubsection();
        {
            let sectionIndex = 4;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Rights";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "p"


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "p"


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "p"


                textSection1.appendChild(message);
            }



            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        
            
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Placeholder. What should be put here?"


                chartSection.appendChild(message);
            }

            let chart2 = new PieChart();
            chart2.addData("Trains in Japan", "2.72", "$", "", "#0021A5", "white");
            chart2.addData("Cars in Florida", "5.89", "$", "", "#FA4616", "black");
            
            chart2.updatePercents();
            
            chart2.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart2.div)



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        
        //Virtue
        section.addSubsection();
        {
            let sectionIndex = 5;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Virtue";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "p"


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "p"


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "p"


                textSection1.appendChild(message);
            }



            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        
            
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Placeholder. What should be put here?"


                chartSection.appendChild(message);
            }

            let chart2 = new PieChart();
            chart2.addData("Trains in Japan", "2.72", "$", "", "#0021A5", "white");
            chart2.addData("Cars in Florida", "5.89", "$", "", "#FA4616", "black");
            
            chart2.updatePercents();
            
            chart2.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart2.div)



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        
        //Fairness
        section.addSubsection();
        {
            let sectionIndex = 6;

            let div = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(div);
            div.classList.add("Slide");


            let header = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(header);
            header.classList.add("Header");
            header.innerText = "Fairness";


            let body = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(body);
            body.classList.add("HorizontalContent");


            let textSection1 = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(textSection1);
            textSection1.classList.add("VerticalContent");
            textSection1.classList.add("TextContainer");


            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "p"


                textSection1.appendChild(message);
            }

            //Section 1
            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.innerText = "p"


                textSection1.appendChild(message);
            }

            //Messages in the text section 
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                
                message.innerText = "p"


                textSection1.appendChild(message);
            }



            let chartSection = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(chartSection);
            chartSection.classList.add("VerticalContent");
            chartSection.style.width = "50%";
            chartSection.style.height = "100%";
        
            
            {
                let message = document.createElement("div");
                section.getSubsection(sectionIndex).addElement(message);
                message.classList.add("Text");
                message.style.textAlign = "center";
                message.innerText = "Placeholder. What should be put here?"


                chartSection.appendChild(message);
            }

            let chart2 = new PieChart();
            chart2.addData("Trains in Japan", "2.72", "$", "", "#0021A5", "white");
            chart2.addData("Cars in Florida", "5.89", "$", "", "#FA4616", "black");
            
            chart2.updatePercents();
            
            chart2.getAnimatedElements().forEach(element=>{
                section.getSubsection(sectionIndex).addElement(element);
            })
            
            chartSection.appendChild(chart2.div)



            div.appendChild(header);
            div.appendChild(body);
            body.appendChild(textSection1);
            body.appendChild(chartSection);



            section.getSubsection(sectionIndex).div.appendChild(div);
        }
        

    </script>


<!-- What to do Section -->
<script>
    let actionSection = new StickySection("What to do");


    section = actionSection;

    //Speed
    section.addSubsection();
    {
        let sectionIndex = 0;

        let div = document.createElement("div");
        section.getSubsection(sectionIndex).addElement(div);
        div.classList.add("Slide");


        let header = document.createElement("div");
        section.getSubsection(sectionIndex).addElement(header);
        header.classList.add("Header");
        header.innerText = "What you can do";


        let body = document.createElement("div");
        section.getSubsection(sectionIndex).addElement(body);
        body.classList.add("HorizontalContent");


        let textSection1 = document.createElement("div");
        section.getSubsection(sectionIndex).addElement(textSection1);
        textSection1.classList.add("VerticalContent");
        textSection1.classList.add("TextContainer");


        //Section 1
        //Messages in the text section 
        {
            let message = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(message);
            message.classList.add("Text");
            message.innerText = "Placeholder"


            textSection1.appendChild(message);
        }

        //Section 1
        //Messages in the text section 
        {
            let message = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(message);
            message.classList.add("Text");
            message.innerText = "Placeholder";


            textSection1.appendChild(message);
        }

        //Messages in the text section 
        {
            let message = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(message);
            message.classList.add("Text");
            
            message.innerText = "Placeholder";


            textSection1.appendChild(message);
        }

        //Messages in the text section 
        {
            let message = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(message);
            message.classList.add("Text");
            
            message.innerText = "placeholder"


            textSection1.appendChild(message);
        }



        let chartSection = document.createElement("div");
        section.getSubsection(sectionIndex).addElement(chartSection);
        chartSection.classList.add("VerticalContent");
        chartSection.style.width = "50%";
        chartSection.style.height = "100%";
    
        
        {
            let message = document.createElement("div");
            section.getSubsection(sectionIndex).addElement(message);
            message.classList.add("Text");
            message.style.textAlign = "center";
            message.innerText = "Placeholder"


            chartSection.appendChild(message);
        }

        let chart2 = new PieChart();
        chart2.addData("Trains in Japan", "2.72", "$", "", "#0021A5", "white");
        chart2.addData("Cars in Florida", "5.89", "$", "", "#FA4616", "black");
        
        chart2.updatePercents();
        
        chart2.getAnimatedElements().forEach(element=>{
            section.getSubsection(sectionIndex).addElement(element);
        })
        
        chartSection.appendChild(chart2.div)



        div.appendChild(header);
        div.appendChild(body);
        body.appendChild(textSection1);
        body.appendChild(chartSection);



        section.getSubsection(sectionIndex).div.appendChild(div);
    }
    

</script>
</html>